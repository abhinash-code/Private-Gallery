<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Private Gallery</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Password Screen -->
    <div id="password-screen" class="screen active">
        <div class="lock-container">
            <div class="lock-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                    <circle cx="12" cy="16" r="1"/>
                    <path d="m12 17 1-5"/>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                </svg>
            </div>
            <h1>Private Gallery</h1>
            <p class="subtitle">Enter password to access your encrypted images</p>
            
            <div class="password-input-container">
                <input type="password" id="password-input" placeholder="Enter password" autocomplete="off">
                <button id="unlock-btn" type="button">Unlock</button>
            </div>
            
            <div id="error-message" class="error-message"></div>
            
            <div class="admin-section">
                <label class="admin-toggle">
                    <input type="checkbox" id="admin-mode-toggle">
                    <span>Admin Mode</span>
                </label>
            </div>
        </div>
    </div>

    <!-- Gallery Screen -->
    <div id="gallery-screen" class="screen">
        <header class="gallery-header">
            <h1>Private Gallery</h1>
            <button id="logout-btn" class="logout-btn">Logout</button>
        </header>
        
        <div id="gallery-container" class="gallery-grid">
            <!-- Images will be populated here -->
        </div>
        
        <div id="empty-gallery" class="empty-state" style="display: none;">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                <circle cx="9" cy="9" r="2"/>
                <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
            </svg>
            <h3>No images yet</h3>
            <p>Use Admin mode to add encrypted images to your gallery</p>
        </div>
    </div>

    <!-- Admin Screen -->
    <div id="admin-screen" class="screen">
        <header class="admin-header">
            <h1>Admin Panel</h1>
            <button id="admin-logout-btn" class="logout-btn">Exit Admin</button>
        </header>
        
        <div class="admin-content">
            <div class="upload-section">
                <h2>Add Images</h2>
                <div class="file-input-container">
                    <input type="file" id="file-input" multiple accept="image/*">
                    <label for="file-input" class="file-input-label">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="17,8 12,3 7,8"/>
                            <line x1="12" y1="3" x2="12" y2="15"/>
                        </svg>
                        Add More Images
                    </label>
                    <p style="font-size: 0.875rem; color: #718096; margin-top: 0.5rem;">
                        You can select multiple images at once, or add them one by one. All selected images will be encrypted together.
                    </p>
                </div>
                
                <div id="file-previews" class="file-previews">
                    <!-- File previews will be populated here -->
                </div>
                
                <div class="export-section">
                    <button id="export-btn" class="export-btn" disabled>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7,10 12,15 17,10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        Encrypt & Export All Images
                    </button>
                    <button id="copy-btn" class="copy-btn" style="display: none;">Copy to Clipboard</button>
                </div>
            </div>
            
            <div class="instructions-section">
                <h3>How to Add Images</h3>
                <ol class="instructions-list">
                    <li>Select multiple image files using "Choose Images"</li>
                    <li>Edit titles for each image (optional)</li>
                    <li>Click "Encrypt & Export" to generate encrypted data</li>
                    <li>Download the generated <code>encrypted-data.js</code> file</li>
                    <li>Replace the existing file in your repository</li>
                    <li>Commit and push to GitHub Pages</li>
                </ol>
                
                <div class="security-notice">
                    <h4>Security Information</h4>
                    <p><strong>Client-side encryption</strong> protects your images from casual viewers and direct URL access. However, with unlimited time and the encrypted data, weak passwords can be brute-forced.</p>
                    <p><strong>Recommendations:</strong></p>
                    <ul>
                        <li>Use a very strong password (12+ characters with mixed case, numbers, symbols)</li>
                        <li>Keep local backups of original images</li>
                        <li>Remember: source code is always visible in static sites</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Lightbox -->
    <div id="lightbox" class="lightbox">
        <div class="lightbox-backdrop"></div>
        <div class="lightbox-content">
            <button class="lightbox-close">&times;</button>
            <img id="lightbox-image" alt="">
            <div class="lightbox-info">
                <h3 id="lightbox-title"></h3>
                <button id="download-btn" class="download-btn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7,10 12,15 17,10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    Download
                </button>
            </div>
        </div>
    </div>

    <!-- Loading indicator -->
    <div id="loading" class="loading" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Processing...</p>
    </div>

    <script src="encrypted-data.js"></script>
    <script src="app.js"></script>
</body>
</html>

